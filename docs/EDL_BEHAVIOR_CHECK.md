# EDL è¡Œä¸ºä½“æ£€ & çµæ•åº¦åˆ†ææŠ¥å‘Š

## æ¦‚è¿°

æœ¬æ–‡æ¡£è®°å½•äº† AR_final é¡¹ç›®ä¸­ EDLï¼ˆEvidential Deep Learningï¼‰è¡Œä¸ºä½“æ£€çš„å®Œæ•´å®ç°å’Œåˆ†æç»“æœã€‚

é€šè¿‡å¯¹æ¯”ä¸‰ç§æ¨¡å¼ï¼ˆbaselineã€EDL-safeã€EDL-robustï¼‰åœ¨æ ‡å‡†åœºæ™¯åº“ä¸Šçš„è¡¨ç°ï¼Œæˆ‘ä»¬å¯ä»¥ï¼š
1. é‡åŒ– EDL åœ¨ä¸åŒåŒºåŸŸçš„æˆæœ¬å½±å“
2. è¯„ä¼°ä¸ç¡®å®šæ€§çš„åˆ†å¸ƒåˆç†æ€§
3. ä¸ºå‚æ•°è°ƒä¼˜æä¾›æ•°æ®æ”¯æ’‘

---

## å®ç°æ¶æ„

### æ–‡ä»¶ç»“æ„

```
scripts/
â”œâ”€â”€ edl_scenarios.py                    # æ ‡å‡†åœºæ™¯åº“å®šä¹‰
â””â”€â”€ run_edl_sensitivity_study.py        # çµæ•åº¦åˆ†ææ ¸å¿ƒè„šæœ¬

tests/
â””â”€â”€ test_edl_sensitivity_script.py      # çµæ•åº¦åˆ†ææµ‹è¯•

reports/
â”œâ”€â”€ edl_sensitivity_results.csv         # åˆ†æç»“æœ CSV
â””â”€â”€ edl_sensitivity_<scenario>.png      # å„åœºæ™¯çš„å¯¹æ¯”å›¾è¡¨

docs/
â””â”€â”€ EDL_BEHAVIOR_CHECK.md               # æœ¬æ–‡æ¡£
```

### æ ¸å¿ƒç»„ä»¶

#### 1. åœºæ™¯åº“ï¼ˆedl_scenarios.pyï¼‰

å®šä¹‰äº† 4 ä¸ªæ ‡å‡†åœºæ™¯ï¼Œè¦†ç›–ä¸åŒçš„åœ°ç†åŒºåŸŸå’Œå†°å†µï¼š

| åœºæ™¯åç§° | æè¿° | èµ·ç‚¹ | ç»ˆç‚¹ | èˆ¹å‹ |
|---------|------|------|------|------|
| `barents_to_chukchi` | å·´ä¼¦æ”¯æµ·åˆ°æ¥šç§‘å¥‡æµ·ï¼ˆé«˜å†°åŒºï¼Œé•¿è·ç¦»ï¼‰ | (69.0Â°N, 33.0Â°E) | (70.5Â°N, 170.0Â°E) | panamax |
| `kara_short` | å¡æ‹‰æµ·çŸ­é€”ï¼ˆä¸­ç­‰å†°åŒºï¼Œå†°çº§èˆ¹ï¼‰ | (73.0Â°N, 60.0Â°E) | (76.0Â°N, 120.0Â°E) | ice_class |
| `west_to_east_demo` | è¥¿å‘ä¸œè·¨è¶ŠåŒ—å†°æ´‹ï¼ˆå…¨ç¨‹é«˜çº¬ï¼Œå¤šå†°åŒºï¼‰ | (66.0Â°N, 5.0Â°E) | (78.0Â°N, 150.0Â°E) | handy |
| `southern_route` | å—å‘åŒ—å†°æ´‹è¾¹ç¼˜ï¼ˆä½å†°åŒºï¼ŒçŸ­è·ç¦»ï¼‰ | (60.0Â°N, 30.0Â°E) | (68.0Â°N, 90.0Â°E) | panamax |

#### 2. çµæ•åº¦åˆ†æè„šæœ¬ï¼ˆrun_edl_sensitivity_study.pyï¼‰

**ä¸‰ç§è§„åˆ’æ¨¡å¼ï¼š**

| æ¨¡å¼ | w_edl | use_edl | use_edl_uncertainty | è¯´æ˜ |
|-----|-------|---------|-------------------|------|
| `efficient` | 0.0 | False | False | åŸºå‡†æ–¹æ¡ˆï¼Œæ—  EDL |
| `edl_safe` | 1.0 | True | False | è€ƒè™‘ EDL é£é™©ï¼Œä¸è€ƒè™‘ä¸ç¡®å®šæ€§ |
| `edl_robust` | 1.0 | True | True | åŒæ—¶è€ƒè™‘ EDL é£é™©å’Œä¸ç¡®å®šæ€§ |

**è¾“å‡ºæŒ‡æ ‡ï¼š**

- `reachable`: è·¯çº¿æ˜¯å¦å¯è¾¾ï¼ˆyes/noï¼‰
- `distance_km`: è·¯çº¿è·ç¦»ï¼ˆå…¬é‡Œï¼‰
- `total_cost`: æ€»æˆæœ¬ï¼ˆA* ç®—æ³•ç´¯ç§¯æˆæœ¬ï¼‰
- `edl_risk_cost`: EDL é£é™©æˆæœ¬è´¡çŒ®
- `edl_uncertainty_cost`: EDL ä¸ç¡®å®šæ€§æˆæœ¬è´¡çŒ®
- `mean_uncertainty`: æ²¿è·¯çº¿çš„å¹³å‡ä¸ç¡®å®šæ€§
- `max_uncertainty`: æ²¿è·¯çº¿çš„æœ€å¤§ä¸ç¡®å®šæ€§
- `comp_*`: å„æˆæœ¬åˆ†é‡ï¼ˆice_risk, wave_risk, ice_class_soft ç­‰ï¼‰

---

## ä½¿ç”¨æ–¹æ³•

### è¿è¡Œçµæ•åº¦åˆ†æ

#### åŸºæœ¬ç”¨æ³•

```bash
# ä½¿ç”¨ demo ç½‘æ ¼è¿è¡Œæ‰€æœ‰åœºæ™¯å’Œæ¨¡å¼
python -m scripts.run_edl_sensitivity_study

# æŒ‡å®šè¾“å‡ºè·¯å¾„
python -m scripts.run_edl_sensitivity_study \
  --output-csv reports/my_results.csv \
  --output-dir reports/my_charts
```

#### é«˜çº§é€‰é¡¹

```bash
# å¹²è¿è¡Œæ¨¡å¼ï¼ˆä»…éªŒè¯è„šæœ¬ï¼Œä¸å®é™…è®¡ç®—ï¼‰
python -m scripts.run_edl_sensitivity_study --dry-run

# ä½¿ç”¨çœŸå®æ•°æ®ï¼ˆéœ€è¦æå‰åŠ è½½çœŸå®ç½‘æ ¼å’Œç¯å¢ƒæ•°æ®ï¼‰
python -m scripts.run_edl_sensitivity_study --use-real-data

# ç»„åˆé€‰é¡¹
python -m scripts.run_edl_sensitivity_study \
  --use-real-data \
  --output-csv reports/real_results.csv \
  --output-dir reports/real_charts
```

### åœ¨ Python ä¸­è°ƒç”¨

```python
from scripts.run_edl_sensitivity_study import (
    run_all_scenarios,
    write_results_to_csv,
    print_summary,
    generate_charts,
    SCENARIOS,
    MODES,
)

# è¿è¡Œåˆ†æ
results = run_all_scenarios(
    scenarios=SCENARIOS,
    modes=list(MODES.keys()),
    use_real_data=False,
    dry_run=False,
)

# è¾“å‡ºç»“æœ
write_results_to_csv(results, "reports/results.csv")
print_summary(results)
generate_charts(results, "reports")
```

---

## åˆ†æç»“æœè§£è¯»

### å…³é”®æŒ‡æ ‡

#### 1. è·¯çº¿å¯è¾¾æ€§ï¼ˆreachableï¼‰

- **yes**: è·¯çº¿è§„åˆ’æˆåŠŸï¼ŒA* æ‰¾åˆ°äº†ä»èµ·ç‚¹åˆ°ç»ˆç‚¹çš„å¯è¡Œè·¯å¾„
- **no**: è·¯çº¿ä¸å¯è¾¾ï¼Œå¯èƒ½åŸå› ï¼š
  - èµ·ç»ˆç‚¹è¢«é™†åœ°åŒ…å›´
  - æˆæœ¬åœºä¸­å­˜åœ¨ä¸å¯é€šè¡Œçš„åŒºåŸŸï¼ˆå¦‚å†°çº§ç¡¬ç¦åŒºï¼‰
  - ç½‘æ ¼åˆ†è¾¨ç‡ä¸è¶³

#### 2. æˆæœ¬å¯¹æ¯”

**å…³é”®è§‚å¯Ÿç‚¹ï¼š**

- **efficient vs edl_safe**: 
  - è‹¥ `edl_safe` çš„ `total_cost` æ˜æ˜¾é«˜äº `efficient`ï¼Œè¯´æ˜ EDL é£é™©åœ¨è¯¥åŒºåŸŸæœ‰æ˜¾è‘—å½±å“
  - è‹¥å·®å¼‚å¾ˆå°ï¼ˆ< 5%ï¼‰ï¼Œå¯èƒ½è¯´æ˜è¯¥åŒºåŸŸæœ¬èº«é£é™©ä¸é«˜æˆ– EDL æ¨¡å‹ä¸æ•æ„Ÿ

- **edl_safe vs edl_robust**:
  - è‹¥ `edl_robust` çš„æˆæœ¬æ˜æ˜¾é«˜äº `edl_safe`ï¼Œè¯´æ˜ä¸ç¡®å®šæ€§åœ¨è¯¥åŒºåŸŸåˆ†å¸ƒä¸å‡
  - è‹¥å·®å¼‚å¾ˆå°ï¼Œè¯´æ˜ä¸ç¡®å®šæ€§çš„å½±å“æœ‰é™

#### 3. ä¸ç¡®å®šæ€§åˆ†æ

**mean_uncertainty å’Œ max_uncertainty çš„å«ä¹‰ï¼š**

- **é«˜ä¸ç¡®å®šæ€§åŒºåŸŸ**ï¼ˆ> 0.7ï¼‰ï¼š
  - EDL æ¨¡å‹å¯¹è¯¥åŒºåŸŸçš„é¢„æµ‹ä¿¡å¿ƒä¸è¶³
  - å¯èƒ½æ˜¯ç¯å¢ƒæ¡ä»¶å¤æ‚æˆ–è®­ç»ƒæ•°æ®ä¸è¶³
  - å»ºè®®ç»“åˆç‰©ç†æ¨¡å‹å’Œäººå·¥åˆ¤æ–­

- **ä½ä¸ç¡®å®šæ€§åŒºåŸŸ**ï¼ˆ< 0.3ï¼‰ï¼š
  - EDL æ¨¡å‹å¯¹è¯¥åŒºåŸŸçš„é¢„æµ‹è¾ƒæœ‰ä¿¡å¿ƒ
  - å¯ä»¥ç›¸å¯¹ä¿¡ä»» EDL çš„é£é™©è¯„ä¼°

- **ä¸ç¡®å®šæ€§ä¸é£é™©çš„åŒå‘æ€§**ï¼š
  - ç†æƒ³æƒ…å†µï¼šé«˜é£é™©åŒºçš„ä¸ç¡®å®šæ€§ä¹Ÿè¾ƒé«˜ï¼ˆæ¨¡å‹çŸ¥é“è‡ªå·±ä¸ç¡®å®šï¼‰
  - å¼‚å¸¸æƒ…å†µï¼šé«˜é£é™©åŒºçš„ä¸ç¡®å®šæ€§å¾ˆä½ï¼ˆæ¨¡å‹è¿‡åº¦è‡ªä¿¡ï¼‰

---

## å…¸å‹åœºæ™¯åˆ†æ

### åœºæ™¯ 1: barents_to_chukchiï¼ˆé«˜å†°åŒºé•¿è·ç¦»ï¼‰

**é¢„æœŸè¡¨ç°ï¼š**
- EDL é£é™©åº”è¯¥æœ‰æ˜¾è‘—è´¡çŒ®ï¼ˆå†°åŒºé£é™©é«˜ï¼‰
- ä¸ç¡®å®šæ€§å¯èƒ½åœ¨æŸäº›åŒºåŸŸè¾ƒé«˜ï¼ˆå†°å†µå˜åŒ–å¤æ‚ï¼‰

**æ£€æŸ¥æ¸…å•ï¼š**
- [ ] `edl_safe` çš„ `edl_risk_cost` > æ€»æˆæœ¬çš„ 10%
- [ ] `edl_robust` çš„ `mean_uncertainty` åœ¨ 0.3~0.7 ä¹‹é—´
- [ ] ä¸‰ç§æ¨¡å¼éƒ½å¯è¾¾

### åœºæ™¯ 2: kara_shortï¼ˆä¸­ç­‰å†°åŒºï¼‰

**é¢„æœŸè¡¨ç°ï¼š**
- EDL é£é™©è´¡çŒ®ä¸­ç­‰
- å†°çº§çº¦æŸå¯èƒ½è¢«è§¦å‘ï¼ˆice_class_soft/hardï¼‰

**æ£€æŸ¥æ¸…å•ï¼š**
- [ ] `edl_risk_cost` å æ¯” 5%~15%
- [ ] å¦‚æœæœ‰ `ice_class_soft` æˆ– `ice_class_hard`ï¼Œæ£€æŸ¥å…¶å æ¯”
- [ ] ä¸‰ç§æ¨¡å¼çš„è·¯çº¿å·®å¼‚ä¸åº”è¿‡å¤§ï¼ˆå¦åˆ™å‚æ•°å¯èƒ½éœ€è¦è°ƒä¼˜ï¼‰

### åœºæ™¯ 3: west_to_east_demoï¼ˆå…¨ç¨‹é«˜çº¬ï¼‰

**é¢„æœŸè¡¨ç°ï¼š**
- åŸºç¡€å†°é£é™© (`ice_risk`) åº”è¯¥å¾ˆé«˜
- EDL é£é™©å¯èƒ½æ˜¯å†°é£é™©çš„è¡¥å……æˆ–ä¿®æ­£

**æ£€æŸ¥æ¸…å•ï¼š**
- [ ] `ice_risk` å æ¯” > 50%
- [ ] `edl_risk_cost` æ˜¯å¦ä¸ `ice_risk` åŒå‘ï¼ˆéƒ½é«˜ï¼‰æˆ–åå‘ï¼ˆäº’è¡¥ï¼‰
- [ ] ä¸ç¡®å®šæ€§åˆ†å¸ƒæ˜¯å¦åˆç†

### åœºæ™¯ 4: southern_routeï¼ˆä½å†°åŒºï¼‰

**é¢„æœŸè¡¨ç°ï¼š**
- åŸºç¡€å†°é£é™©è¾ƒä½
- EDL é£é™©å¯èƒ½ä¹Ÿè¾ƒä½
- ä¸‰ç§æ¨¡å¼çš„æˆæœ¬åº”è¯¥æ¥è¿‘

**æ£€æŸ¥æ¸…å•ï¼š**
- [ ] `edl_risk_cost` å æ¯” < 5%ï¼ˆç¬¦åˆé¢„æœŸï¼‰
- [ ] è‹¥å æ¯” > 5%ï¼Œæ£€æŸ¥æ˜¯å¦æ˜¯æ¨¡å‹è¿‡åº¦é¢„è­¦

---

## å‚æ•°è°ƒä¼˜å»ºè®®

### w_edlï¼ˆEDL é£é™©æƒé‡ï¼‰

**å½“å‰è®¾ç½®ï¼š** 1.0

**è°ƒä¼˜æŒ‡å—ï¼š**

| è§‚å¯Ÿç°è±¡ | å»ºè®®è°ƒæ•´ | ç†ç”± |
|---------|--------|------|
| EDL é£é™©å æ¯” < 2% | å¢åŠ  w_edlï¼ˆ1.5~2.0ï¼‰ | EDL è´¡çŒ®è¿‡å°ï¼Œå¯èƒ½æƒé‡ä¸è¶³ |
| EDL é£é™©å æ¯” > 30% | å‡å°‘ w_edlï¼ˆ0.5~0.7ï¼‰ | EDL è´¡çŒ®è¿‡å¤§ï¼Œå¯èƒ½æƒé‡è¿‡é«˜ |
| EDL é£é™©å æ¯” 5%~15% | ä¿æŒå½“å‰å€¼ | åˆç†èŒƒå›´ |

**å»ºè®®èŒƒå›´ï¼š** 0.5 ~ 2.0

### edl_uncertainty_weightï¼ˆä¸ç¡®å®šæ€§æƒé‡ï¼‰

**å½“å‰è®¾ç½®ï¼š** 1.0

**è°ƒä¼˜æŒ‡å—ï¼š**

| è§‚å¯Ÿç°è±¡ | å»ºè®®è°ƒæ•´ | ç†ç”± |
|---------|--------|------|
| ä¸ç¡®å®šæ€§æˆæœ¬å æ¯” < 1% | å¢åŠ æƒé‡ï¼ˆ2.0~3.0ï¼‰ | ä¸ç¡®å®šæ€§å½±å“ä¸è¶³ |
| ä¸ç¡®å®šæ€§æˆæœ¬å æ¯” > 20% | å‡å°‘æƒé‡ï¼ˆ0.3~0.5ï¼‰ | ä¸ç¡®å®šæ€§å½±å“è¿‡å¤§ |
| ä¸ç¡®å®šæ€§æˆæœ¬å æ¯” 5%~10% | ä¿æŒå½“å‰å€¼ | åˆç†èŒƒå›´ |

**å»ºè®®èŒƒå›´ï¼š** 0.5 ~ 3.0

### ice_penaltyï¼ˆå†°é£é™©æƒé‡ï¼‰

**å½“å‰è®¾ç½®ï¼š** 4.0

**è°ƒä¼˜æŒ‡å—ï¼š**

- è‹¥å†°é£é™©å æ¯”è¿‡é«˜ï¼ˆ> 60%ï¼‰ï¼Œè€ƒè™‘é™ä½ ice_penaltyï¼ˆ2.0~3.0ï¼‰
- è‹¥å†°é£é™©å æ¯”è¿‡ä½ï¼ˆ< 20%ï¼‰ï¼Œè€ƒè™‘æé«˜ ice_penaltyï¼ˆ5.0~8.0ï¼‰
- å»ºè®®èŒƒå›´ï¼š2.0 ~ 10.0

---

## å¸¸è§é—®é¢˜

### Q1: EDL é£é™©å®Œå…¨ä¸ç”Ÿæ•ˆï¼ˆedl_risk_cost â‰ˆ 0ï¼‰

**å¯èƒ½åŸå› ï¼š**
1. çœŸå®ç¯å¢ƒæ•°æ®ä¸å¯ç”¨ï¼Œä½¿ç”¨äº† demo ç½‘æ ¼ï¼ˆdemo æ¨¡å¼ä¸‹ä¸å¯ç”¨ EDLï¼‰
2. w_edl è®¾ç½®ä¸º 0
3. PyTorch æˆ– miles-guess åç«¯ä¸å¯ç”¨

**è§£å†³æ–¹æ¡ˆï¼š**
- æ£€æŸ¥æ—¥å¿—ä¸­çš„ `[COST]` å’Œ `[EDL]` æ¶ˆæ¯
- ç¡®ä¿ `use_edl=True` ä¸” `w_edl > 0`
- å°è¯• `--use-real-data` é€‰é¡¹

### Q2: ä¸ç¡®å®šæ€§åˆ†å¸ƒä¸åˆç†ï¼ˆé«˜é£é™©åŒºä¸ç¡®å®šæ€§åè€Œä½ï¼‰

**å¯èƒ½åŸå› ï¼š**
1. EDL æ¨¡å‹è®­ç»ƒæ•°æ®ä¸è¶³æˆ–åˆ†å¸ƒåå·®
2. ç‰¹å¾å·¥ç¨‹ä¸åˆç†ï¼ˆå½’ä¸€åŒ–èŒƒå›´ä¸å½“ï¼‰
3. æ¨¡å‹è¿‡åº¦æ‹Ÿåˆ

**è§£å†³æ–¹æ¡ˆï¼š**
- æ£€æŸ¥ç‰¹å¾çš„å½’ä¸€åŒ–èŒƒå›´ï¼ˆè§ cost.py ä¸­çš„ç‰¹å¾æ„é€ ï¼‰
- è€ƒè™‘é‡æ–°è®­ç»ƒ EDL æ¨¡å‹æˆ–è°ƒæ•´æ¨¡å‹æ¶æ„
- åœ¨é«˜ä¸ç¡®å®šæ€§åŒºåŸŸå¢åŠ è®­ç»ƒæ•°æ®

### Q3: ä¸‰ç§æ¨¡å¼çš„è·¯çº¿å®Œå…¨ç›¸åŒ

**å¯èƒ½åŸå› ï¼š**
1. å‚æ•°æƒé‡è®¾ç½®ä¸å½“ï¼Œå·®å¼‚ä¸è¶³ä»¥æ”¹å˜è·¯çº¿
2. ç½‘æ ¼åˆ†è¾¨ç‡å¤ªä½ï¼Œè·¯çº¿é€‰æ‹©æœ‰é™
3. æˆæœ¬åœºä¸­çš„å†°é£é™©æˆ– EDL é£é™©åˆ†å¸ƒè¿‡äºå‡åŒ€

**è§£å†³æ–¹æ¡ˆï¼š**
- å¢åŠ  w_edl æˆ– ice_penalty çš„å·®å¼‚
- å°è¯•æ›´é«˜åˆ†è¾¨ç‡çš„ç½‘æ ¼
- æ£€æŸ¥æˆæœ¬åœºçš„åˆ†å¸ƒï¼ˆç»˜åˆ¶çƒ­åŠ›å›¾ï¼‰

### Q4: æŸä¸ªåœºæ™¯ä¸å¯è¾¾

**å¯èƒ½åŸå› ï¼š**
1. èµ·ç»ˆç‚¹è¢«é™†åœ°åŒ…å›´ï¼ˆç‰¹åˆ«æ˜¯åœ¨ demo ç½‘æ ¼ä¸Šï¼‰
2. å†°çº§ç¡¬çº¦æŸè¿‡ä¸¥æ ¼ï¼Œå¯¼è‡´æ— å¯è¡Œè·¯å¾„
3. ç½‘æ ¼è¾¹ç•Œé—®é¢˜

**è§£å†³æ–¹æ¡ˆï¼š**
- è°ƒæ•´èµ·ç»ˆç‚¹åæ ‡ï¼Œé¿å¼€é™†åœ°
- é™ä½ ice_penalty æˆ–æ”¾å®½å†°çº§çº¦æŸ
- æ£€æŸ¥ç½‘æ ¼çš„æœ‰æ•ˆèŒƒå›´

---

## è¾“å‡ºæ–‡ä»¶è¯´æ˜

### CSV æ–‡ä»¶ï¼ˆedl_sensitivity_results.csvï¼‰

**åˆ—è¯´æ˜ï¼š**

```
scenario              # åœºæ™¯åç§°
mode                  # è§„åˆ’æ¨¡å¼ï¼ˆefficient/edl_safe/edl_robustï¼‰
reachable             # æ˜¯å¦å¯è¾¾ï¼ˆyes/noï¼‰
distance_km           # è·¯çº¿è·ç¦»
total_cost            # æ€»æˆæœ¬
edl_risk_cost         # EDL é£é™©æˆæœ¬
edl_uncertainty_cost  # EDL ä¸ç¡®å®šæ€§æˆæœ¬
mean_uncertainty      # å¹³å‡ä¸ç¡®å®šæ€§
max_uncertainty       # æœ€å¤§ä¸ç¡®å®šæ€§
comp_*                # å„æˆæœ¬åˆ†é‡
error                 # é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æœ‰ï¼‰
```

**ä½¿ç”¨ç¤ºä¾‹ï¼š**

```python
import pandas as pd

df = pd.read_csv("reports/edl_sensitivity_results.csv")

# æŒ‰åœºæ™¯åˆ†ç»„ç»Ÿè®¡
summary = df.groupby("scenario").agg({
    "total_cost": ["min", "max", "mean"],
    "edl_risk_cost": "mean",
    "mean_uncertainty": "mean",
})

print(summary)
```

### PNG å›¾è¡¨ï¼ˆedl_sensitivity_<scenario>.pngï¼‰

**åŒ…å«ä¸‰ä¸ªå­å›¾ï¼š**

1. **Total Cost**: ä¸‰ç§æ¨¡å¼çš„æ€»æˆæœ¬å¯¹æ¯”
2. **EDL Risk Cost**: EDL é£é™©æˆæœ¬å¯¹æ¯”
3. **EDL Uncertainty Cost**: EDL ä¸ç¡®å®šæ€§æˆæœ¬å¯¹æ¯”

**è§£è¯»ï¼š**
- æŸ±å­è¶Šé«˜ï¼Œæˆæœ¬è¶Šå¤§
- ä¸‰ä¸ªæ¨¡å¼çš„ç›¸å¯¹é«˜åº¦åæ˜ äº†å„æ¨¡å¼çš„æˆæœ¬å·®å¼‚
- è‹¥ EDL Risk Cost å’Œ EDL Uncertainty Cost éƒ½å¾ˆå°ï¼Œè¯´æ˜ EDL åœ¨è¯¥åœºæ™¯çš„å½±å“æœ‰é™

---

## é›†æˆåˆ° UI çš„æ”¹è¿›

### planner_minimal.py ä¸­çš„ EDL é£é™©æç¤º

åœ¨ `edl_safe` æ–¹æ¡ˆçš„æˆæœ¬åˆ†è§£æ˜¾ç¤ºä¸­ï¼Œæ·»åŠ äº†è‡ªåŠ¨æ£€æµ‹é€»è¾‘ï¼š

```python
# å¦‚æœ EDL é£é™©å æ¯” < 5%ï¼Œæ˜¾ç¤ºæç¤º
if edl_risk_fraction < 0.05:
    st.info(
        f"ğŸ’¡ **EDL é£é™©è´¡çŒ®å¾ˆå°**ï¼ˆå æ¯” {edl_risk_fraction*100:.1f}%ï¼‰ã€‚"
        f"è¿™å¯èƒ½è¡¨ç¤ºï¼š\n"
        f"1. å½“å‰åŒºåŸŸæœ¬èº«ç¯å¢ƒé£é™©ä¸é«˜ï¼ˆæµ·å†°ã€æ³¢æµªç­‰è¾ƒå°‘ï¼‰\n"
        f"2. EDL æ¨¡å‹åœ¨è¯¥åŒºåŸŸçš„é¢„æµ‹ä¸æ•æ„Ÿ\n"
        f"3. å»ºè®®æ£€æŸ¥ w_edl æƒé‡æ˜¯å¦è®¾ç½®è¿‡ä½"
    )
```

**ç”¨æˆ·ä½“éªŒæ”¹è¿›ï¼š**
- è‡ªåŠ¨è¯†åˆ« EDL ä¸ç”Ÿæ•ˆçš„æƒ…å†µ
- æä¾›å¯æ“ä½œçš„å»ºè®®
- å¸®åŠ©ç”¨æˆ·ç†è§£å‚æ•°çš„å½±å“

---

## æµ‹è¯•è¦†ç›–

### å•å…ƒæµ‹è¯•ï¼ˆtest_edl_sensitivity_script.pyï¼‰

**æµ‹è¯•èŒƒå›´ï¼š**
- åœºæ™¯åº“çš„åŠ è½½å’ŒæŸ¥è¯¢
- çµæ•åº¦ç»“æœçš„æ•°æ®ç»“æ„
- æ¨¡å¼é…ç½®çš„å®Œæ•´æ€§
- CSV è¾“å‡ºçš„æ­£ç¡®æ€§
- å›¾è¡¨ç”Ÿæˆçš„é²æ£’æ€§

**è¿è¡Œæµ‹è¯•ï¼š**

```bash
pytest tests/test_edl_sensitivity_script.py -v
```

---

## åç»­æ”¹è¿›æ–¹å‘

### çŸ­æœŸï¼ˆPhase 3 å®Œæˆï¼‰
- [x] å®ç°æ ‡å‡†åœºæ™¯åº“
- [x] å®ç°çµæ•åº¦åˆ†æè„šæœ¬
- [x] ç”Ÿæˆå¯¹æ¯”å›¾è¡¨
- [x] æ·»åŠ  UI æç¤º
- [x] ç¼–å†™æµ‹è¯•å’Œæ–‡æ¡£

### ä¸­æœŸï¼ˆPhase 4+ï¼‰
- [ ] æ”¯æŒè‡ªå®šä¹‰åœºæ™¯åº“
- [ ] å®ç°å‚æ•°æ‰«æï¼ˆgrid searchï¼‰
- [ ] æ·»åŠ ç»Ÿè®¡æ˜¾è‘—æ€§æ£€éªŒ
- [ ] æ”¯æŒå¤šä¸ª EDL æ¨¡å‹å¯¹æ¯”
- [ ] å®ç°äº¤äº’å¼å‚æ•°è°ƒä¼˜å·¥å…·

### é•¿æœŸ
- [ ] é›†æˆçœŸå®æµ·å†°é¢„æŠ¥æ•°æ®
- [ ] æ”¯æŒå¤šç›®æ ‡ä¼˜åŒ–ï¼ˆPareto å‰æ²¿ï¼‰
- [ ] å®ç°åœ¨çº¿å­¦ä¹ å’Œæ¨¡å‹æ›´æ–°
- [ ] å»ºç«‹ EDL æ¨¡å‹åº“å’Œè¯„ä¼°æ¡†æ¶

---

## å‚è€ƒèµ„æº

- **EDL æ ¸å¿ƒæ¨¡å—**: `arcticroute/ml/edl_core.py`
- **æˆæœ¬æ„å»º**: `arcticroute/core/cost.py`
- **A* è·¯ç”±**: `arcticroute/core/astar.py`
- **UI é›†æˆ**: `arcticroute/ui/planner_minimal.py`
- **åˆ†æå·¥å…·**: `arcticroute/core/analysis.py`

---

## æ›´æ–°æ—¥å¿—

### 2024-12-08
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- å®ç° Phase 3 æ‰€æœ‰æ­¥éª¤
- å®Œæˆæ–‡æ¡£å’Œæµ‹è¯•

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**æœ€åæ›´æ–°**: 2024-12-08  
**ç»´æŠ¤è€…**: ArcticRoute é¡¹ç›®ç»„
















